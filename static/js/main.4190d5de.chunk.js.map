{"version":3,"sources":["hooks.js","mockAdapter.js","API_URL.js","Tasks/TaskTimer.js","Tasks/ShowTask.js","Tasks/EditTask.js","Tasks/Task.js","Tasks/CreateTaskForm.js","Tasks/CreateTask.js","App/SearchBar.js","App/LocalStorageNotice.js","App/ImportTasks.js","App/ExportTasks.js","App/ButtonBar.js","App.js","index.js"],"names":["isTaskEqualTo","task","otherTask","name","project","useWillUnmount","useState","willUnmount","setWillUnmount","useEffect","useErrorMessage","errorMessage","setErrorMessage","isHidden","setIsHidden","errorDiv","className","timeout","setTimeout","clearTimeout","mockAPI","mockAdapter","MockAdapter","axios","delayResponse","saveTasks","tasks","localStorage","setItem","JSON","stringify","expirationDate","Date","setFullYear","getFullYear","document","cookie","escape","toGMTString","setTasksInCookies","getItem","parse","match","json","unescape","getTasksFromCookies","onGet","reply","config","slice","onPost","newTask","data","some","push","onPatch","old_task","new_task","find","undefined","Object","assign","filter","newTasks","concat","API_URL","Boolean","process","REACT_APP_API","replace","initCanvas","canvas","rect","getBoundingClientRect","width","height","cx","getContext","fillStyle","drawTime","percent","startAngle","Math","PI","endAngle","center","globalAlpha","clearRect","beginPath","moveTo","arc","fill","globalCompositeOperation","TaskTimer","seconds","isTimerRunning","children","startingSeconds","setStartingSeconds","minutes","floor","lastMinutes","setLastMinutes","canvasRef","useRef","current","JEST_WORKER_ID","timerIsRunning","requestAnimationFrame","frame","time","dt","lastTime","minutePercent","performance","now","startTimer","drawTimer","ref","zeroPad","number","String","substr","ShowTask","editTask","updateTasks","selectProject","onPlayStart","setSeconds","hours","setIsTimerRunning","startTime","setStartTime","secondsBeforeStart","setSecondsBeforeStart","interval","setInterval","clearInterval","saveTask","useCallback","callback","patch","then","resp","catch","err","response","status","console","error","stopTimer","map","someTask","window","onbeforeunload","evt","draggable","onDragStart","dataTransfer","setData","onDragOver","preventDefault","onDrop","getData","split","other","otherIndex","findIndex","taskIndex","otherTimestamp","length","timestamp","reorderTasks","style","color","onClick","src","alt","title","_fromEvent","setter","target","value","EditTask","cancelEdition","taskName","setTaskName","setMinutes","setHours","hasClickedDelete","setHasClickedDelete","confirmButton","disabled","type","placeholder","onChange","min","max","post","Task","isEditing","setIsEditing","isFirstTime","setIsFirstTime","tasksLength","newProjectColors","CreateTaskForm","projects","projectColors","onCreate","onCancel","selectedProjectName","setSelectedProjectName","newProjectName","setNewProjectName","random","newProjectColor","setNewProjectColor","taskColor","createButton","onSubmit","event","id","key","fontStyle","CreateTask","isCreatingTask","setIsCreatingTask","projectsLength","SearchBar","searchQuery","setSearchQuery","inputRef","handleEscape","focus","addEventListener","removeEventListener","right","LocalStorageNotice","isUnderstood","setIsUnderstood","Import","input","createElement","processFile","file","result","accept","click","files","reader","FileReader","readAsText","ExportTasks","a","setAttribute","encodeURIComponent","ButtonBar","ImportTasks","App","setTasks","updateCounter","setUpdateCounter","get","sort","taskA","taskB","searchWords","trim","toLowerCase","every","word","includes","updaterFunction","useTasks","create","reduce","getProjectsFromTasks","clear","href","ReactDOM","render","getElementById"],"mappings":"+QAIaA,EAAgB,SAAAC,GAAI,OAAI,SAAAC,GAAS,OAC5CD,EAAKE,OAASD,EAAUC,MAAQF,EAAKG,UAAYF,EAAUE,UAOtD,SAASC,IAAkB,IAAD,EACOC,oBAAS,GADhB,mBACxBC,EADwB,KACXC,EADW,KAO/B,OAJAC,qBAAU,WACR,OAAO,kBAAMD,GAAe,MAC3B,IAEID,EAmFF,SAASG,IAAmB,IAAD,EACQJ,mBAAS,IADjB,mBACzBK,EADyB,KACXC,EADW,OAEAN,oBAAS,GAFT,mBAEzBO,EAFyB,KAEfC,EAFe,KAI1BC,EACJ,yBAAKC,UAAS,wBAAmBH,EAAQ,cACtCF,GAqBL,OAjBAF,qBAAU,WACR,GAAIE,EAAc,CAChBG,GAAY,GAEZ,IAAIG,EAAUC,YAAW,WACvBJ,GAAY,GACZF,EAAgB,IAChBK,EAAU,OACT,MACH,OAAO,WACDA,GACFE,aAAaF,OAIlB,CAACN,IAEG,CAACI,EAAUH,GC7HpB,IAAMQ,EAAU,2BACVC,EAAc,IAAIC,IAAYC,IAAO,CAAEC,cAAe,MAW5D,SAASC,EAAUC,GACjBC,aAAaC,QAAQ,QAASC,KAAKC,UAAUJ,IAW/C,SAA2BA,GACzB,IAAMK,EAAiB,IAAIC,KAC3BD,EAAeE,YAAYF,EAAeG,cAAgB,GAC1DC,SAASC,OAAT,gBAA2BC,OACzBR,KAAKC,UAAUJ,IADjB,oBAEaK,EAAeO,eAf5BC,CAAkBb,GAkBpB,IAAIA,EA5BEC,aAAaa,QAAQ,SAChBX,KAAKY,MAAMd,aAAaa,QAAQ,UAY3C,WACE,IACME,EADSP,SAASC,OACHM,MAAM,iBACrBC,EAAOD,GAASE,SAASF,EAAM,IACrC,OAAOC,GAAQd,KAAKY,MAAME,GAbjBE,IAAyB,GA0BpCxB,EAAYyB,MAAZ,UAAqB1B,EAArB,YAAuC2B,OAAM,SAAAC,GAC3C,MAAO,CAAC,IAAKtB,EAAMuB,YAGrB5B,EAAY6B,OAAZ,UAAsB9B,EAAtB,YAAwC2B,OAAM,SAAAC,GAC5C,IAAMG,EAAUtB,KAAKY,MAAMO,EAAOI,MAElC,OAAI1B,EAAM2B,KAAKrD,EAAcmD,IACpB,CAAC,IAAK,KAGfzB,EAAM4B,KAAKH,GACX1B,EAAUC,GACH,CAAC,IAAK,QAGfL,EAAYkC,QAAZ,UAAuBnC,EAAvB,YAAyC2B,OAAM,SAAAC,GAAW,IAAD,EACxBnB,KAAKY,MAAMO,EAAOI,MAAzCI,EAD+C,EAC/CA,SAAUC,EADqC,EACrCA,SAEZxD,EAAOyB,EAAMgC,KAAK1D,EAAcwD,IAEtC,OACGxD,EAAcwD,EAAdxD,CAAwByD,IACzB/B,EAAM2B,KAAKrD,EAAcyD,IAGlB,CAAC,IAAK,SAGFE,IAAT1D,EACK,CAAC,IAAK,KAGf2D,OAAOC,OAAO5D,EAAMwD,GACpBhC,EAAUC,GACH,CAAC,IAAK,QAGfL,EAAY6B,OAAZ,UAAsB9B,EAAtB,kBAA8C2B,OAAM,SAAAC,GAClD,IAAM/C,EAAO4B,KAAKY,MAAMO,EAAOI,MAE/B,OAAK1B,EAAM2B,KAAKrD,EAAcC,KAK9BwB,EADAC,EAAQA,EAAMoC,QAAO,SAAA5D,GAAS,OAAKF,EAAcC,EAAdD,CAAoBE,OAEhD,CAAC,IAAK,KALJ,CAAC,IAAK,OAQjBmB,EAAY6B,OAAZ,UAAsB9B,EAAtB,mBAA+C2B,OAAM,SAAAC,GACnD,IAAMe,EAAWlC,KAAKY,MAAMO,EAAOI,MAOnC,OADA3B,EAJAC,EAAQA,EACLoC,QAAO,SAAA7D,GAAI,OAAK8D,EAASV,KAAKrD,EAAcC,OAC5C+D,OAAOD,IAGH,CAAC,IAAK,OC9Ff,IAQeE,EARKC,QAAQC,iEAAYC,eAEpCD,iEAAYC,cAAcC,QAAQ,MAAO,IACzCjD,ECHJ,SAASkD,EAAWC,GAClB,IAAMC,EAAOD,EAAOE,wBACdC,EAASH,EAAOG,MAAQF,EAAKE,MAC7BC,EAAUJ,EAAOI,OAASH,EAAKG,OAE/BC,EAAKL,EAAOM,WAAW,MAG7B,OAFAD,EAAGE,UAAY,QAER,CAACF,EAAIF,EAAOC,GAGrB,SAASI,EAASH,EAAIF,EAAOC,EAAQK,GACnC,IAAMC,GAAcC,KAAKC,GAAK,EACxBC,EAAqB,EAAVF,KAAKC,GAASH,EAAUC,EACnCI,EAAS,CAACX,EAAQ,EAAGC,EAAS,GAEpCC,EAAGU,YAAc,GACjBV,EAAGW,UAAU,EAAG,EAAGb,EAAOC,GAC1BC,EAAGY,YACHZ,EAAGa,OAAH,MAAAb,EAAaS,GACbT,EAAGc,IAAH,MAAAd,EAAUS,EAAP,OAAD,CAAgBX,EAAQ,EAAGO,EAAYG,KACzCR,EAAGe,OAEHf,EAAGU,YAAc,EACjBV,EAAGgB,yBAA2B,kBAC9BhB,EAAGY,YACHZ,EAAGa,OAAH,MAAAb,EAAaS,GACbT,EAAGc,IAAH,MAAAd,EAAUS,EAAP,OAAD,CAAgBX,EAAQ,EAAI,EAAG,EAAa,EAAVQ,KAAKC,MACzCP,EAAGe,OACHf,EAAGgB,yBAA2B,cA8EjBC,MAxCf,YAAmE,IAA9CC,EAA6C,EAA7CA,QAA6C,IAApCC,sBAAoC,SAAZC,EAAY,EAAZA,SAAY,EAClB1F,mBAASwF,GADS,mBACzDG,EADyD,KACxCC,EADwC,KAE1DC,EAAUjB,KAAKkB,MAAMN,EAAU,IAF2B,EAG1BxF,mBAAS6F,GAHiB,mBAGzDE,EAHyD,KAG5CC,EAH4C,KAI1DC,EAAYC,iBAAO,MA4BzB,OAzBA/F,qBAAU,WACJ0F,IAAYE,IACdH,EAAmBJ,GACnBQ,EAAeH,MAEhB,CAACA,EAASE,EAAaP,IAG1BrF,qBAAU,WACHsF,GACHG,EAAmBJ,KAEpB,CAACC,EAAgBD,IAGpBrF,qBAAU,WACR,GAAI8F,EAAUE,cAA0C9C,IAA/BQ,iEAAYuC,eAA8B,CACjE,GAAIX,EACF,OA5DR,SAAoBxB,EAAQ0B,GAC1B,IAAIU,GAAiB,EADsB,EAGfrC,EAAWC,GAHI,mBAGpCK,EAHoC,KAGhCF,EAHgC,KAGzBC,EAHyB,KAK3CiC,uBAKA,SAASC,EAAMC,GACTH,GACFC,sBAAsBC,GAGxB,IAAME,GAAMD,EAAOE,GAAY,IAC/BA,EAAWF,EAIX/B,EAASH,EAAIF,EAAOC,EAFpBsC,GAAiBF,EAAK,OAXxB,IAAIC,EAAWE,YAAYC,MACvBF,EAAiBhB,EAAkB,GAAM,GAe7C,OAAO,WACLU,GAAiB,GAoCNS,CAAWb,EAAUE,QAASR,IAhC7C,SAAmB1B,EAAQuB,GAAU,IAAD,EACNxB,EAAWC,GADL,mBAIlCQ,EAJkC,eAEjBe,EAAU,GAAM,IAgC3BuB,CAAUd,EAAUE,QAASR,MAGhC,CAACF,EAAgBE,IAGlB,yBAAKjF,UAAU,wBACb,4BAAQsG,IAAKf,EAAWvF,UAAU,eACjCgF,I,ykBClGP,IAAMuB,EAAU,SAAAC,GACd,OAAOC,OAAO,IAAOD,EAAS,KAAME,OAAO,IAgP9BC,MA7Of,YAOI,IANF1H,EAMC,EANDA,KACA2H,EAKC,EALDA,SACAC,EAIC,EAJDA,YACAC,EAGC,EAHDA,cACApG,EAEC,EAFDA,MACAqG,EACC,EADDA,YACC,EAC6BzH,mBAASL,EAAK6F,SAD3C,mBACMA,EADN,KACekC,EADf,KAEK7B,EAAUjB,KAAKkB,MAAMN,EAAU,IAAM,GACrCmC,EAAQ/C,KAAKkB,MAAMN,EAAU,GAAK,IAHvC,EAK2CxF,oBAAS,GALpD,mBAKMyF,EALN,KAKsBmC,EALtB,OAMiC5H,mBAAS,MAN1C,mBAMM6H,EANN,KAMiBC,EANjB,OAOmD9H,mBAASL,EAAK6F,SAPjE,mBAOMuC,EAPN,KAO0BC,EAP1B,OASmC5H,IATnC,mBASMK,EATN,KASgBH,EAThB,KAUKL,EAAcF,IAGpBI,qBAAU,WACR,GAAIsF,EAAgB,CAClB,IAAMwC,EAAWC,aAAY,WAC3BR,EACE9C,KAAKkB,MAAMiC,EAAqBrG,KAAKmF,MAAQ,IAAOgB,MAErD,KAEH,OAAO,kBAAMM,cAAcF,IAE3BP,EAAWK,KAEZ,CAACtC,EAAgBsC,EAAoBF,IAExC1H,qBAAU,WACJsF,GACFqC,EAAapG,KAAKmF,MAAQ,OAE3B,CAACpB,IAEJtF,qBAAU,WACHsF,GACHuC,EAAsBrI,EAAK6F,WAE5B,CAACC,EAAgB9F,EAAK6F,UAEzB,IAAM4C,EAAWC,uBACf,SAAAC,GACErH,IACGsH,MADH,UACY5E,EADZ,WAC8B,CAC1BT,SAAU,CAAErD,KAAMF,EAAKE,KAAMC,QAASH,EAAKG,SAC3CqD,SAAS,EAAD,GAAOxD,EAAP,CAAa6F,cAEtBgD,MAAK,SAAAC,GACAH,GACFA,OAGHI,OAAM,SAAAC,GACDA,EAAIC,UAAoC,MAAxBD,EAAIC,SAASC,OAC/BvI,EACE,iEAEOqI,EAAIC,UAAoC,MAAxBD,EAAIC,SAASC,OACtCvI,EACE,sDAGFA,EAAgB,qCAChBwI,QAAQC,MAAMJ,SAItB,CAAChJ,EAAM6F,EAASlF,IAIlB,SAAS0I,IACPZ,GAAS,WACPb,GAAY,SAAAnG,GAAK,OACfA,EAAM6H,KAAI,SAAAC,GACR,OACEA,EAASrJ,OAASF,EAAKE,MACvBqJ,EAASpJ,UAAYH,EAAKG,QAEnB,EAAP,GAAYH,EAAZ,CAAkB6F,YAEb0D,QAGNjJ,GACH2H,GAAkB,MAkExB,OA5DAzH,qBAAU,WACJsF,GAAkBD,IAAY7F,EAAK6F,SAAWA,EAAU,KAAO,GACjE4C,MAED,CAAC3C,EAAgB2C,EAAU5C,EAAS7F,EAAK6F,UA8C5CrF,qBAAU,WACR,GAAIsF,EAKF,OAJA0D,OAAOC,eAAiB,SAAAC,GACtB,MAAO,4DAGF,kBAAOF,OAAOC,oBAAiB/F,KAEvC,CAACoC,IAGF,yBACE6D,WAAS,EACTC,YAAa,SAAAF,GACXA,EAAIG,aAAaC,QAAQ,aAAzB,UAA0C9J,EAAKE,KAA/C,YAAuDF,EAAKG,WAE9D4J,WAAY,SAAAL,GAAG,OAAIA,EAAIM,kBACvBC,OAAQ,SAAAP,GACNA,EAAIM,iBADS,MAEWN,EAAIG,aAAaK,QAAQ,QAAQC,MAAM,KAFlD,oBA7DnB,SAAsBC,GACpB,IAAMC,EAAa5I,EAAM6I,UAAUvK,EAAcqK,IAC3CG,EAAY9I,EAAM6I,UAAUvK,EAAcC,IAEhD,IAAoB,IAAhBqK,IAAoC,IAAfE,EAAzB,CAEA,IAAIC,EAGFA,EADEH,EAAaE,EAEbA,GAAa9I,EAAMgJ,OAAS,EACxBzK,EAAK0K,UAAY,IACjBjJ,EAAM8I,EAAY,GAAGG,UAGzBH,EAAY,EAAI9I,EAAM8I,EAAY,GAAGG,UAAY3I,KAAKmF,MAG1D,IAAMwD,EAAYzF,KAAKkB,OAAOnG,EAAK0K,UAAYF,GAAkB,GAC3DvK,EAAYwB,EAAMgC,KAAK1D,EAAcqK,IAE3C9I,IACGsH,MADH,UACY5E,EADZ,WAC8B,CAC1BT,SAAU6G,EACV5G,SAAS,EAAD,GAAOvD,EAAP,CAAkByK,gBAE3B7B,MAAK,SAAAC,GACJlB,OAEDmB,OAAM,SAAAC,GACDA,EAAIC,UAAoC,MAAxBD,EAAIC,SAASC,OAC/BvI,EACE,iEAEOqI,EAAIC,UAAoC,MAAxBD,EAAIC,SAASC,OACtCvI,EAAgB,sDAEhBA,EAAgB,qCAChBwI,QAAQC,MAAMJ,QA0BhB2B,CAAa,CAAEzK,KAHF,KAGQC,QAHR,QAKfY,UAAU,OACV6J,MAAO,CACL,eAAgB5K,EAAK6K,QAGvB,yBAAK9J,UAAU,aACb,kBAAC,EAAD,CAAW8E,QAASA,EAASC,eAAgBA,GACzCA,EAeA,4BACE/E,UAAU,OACV+J,QAAS,WACPzB,MAGF,yBACE0B,IAAG,UAAK7G,sBAAL,kCACH8G,IAAI,aACJC,MAAM,gBAvBV,4BACElK,UAAU,QACV+J,QAAS,WACP7C,GAAkB,GAClBH,MAGF,yBACEiD,IAAG,UAAK7G,sBAAL,uCACH8G,IAAI,cACJC,MAAM,mBAmBhB,yBAAKlK,UAAU,aACb,yBAAKA,UAAU,cACb,4BAAKf,EAAKE,MACToH,EAAQU,GAFX,IAEoBV,EAAQpB,GACzB,MACD,0BACEnF,UAAU,YACV+J,QAAS,kBAAMjD,EAAc7H,EAAKG,WAEjCH,EAAKG,SAEPW,GAEH,yBAAKC,UAAU,aACb,4BACEA,UAAU,OACV+J,QAAS,WACHhF,GACFuD,IAEF1B,MANJ,Y,ykBChOV,IAAMuD,EAAa,SAAAC,GAAM,OAAI,SAAAzB,GAAG,OAAIyB,EAAOzB,EAAI0B,OAAOC,SAgIvCC,MA9Hf,YAAyD,IAArCtL,EAAoC,EAApCA,KAAMuL,EAA8B,EAA9BA,cAAe3D,EAAe,EAAfA,YAAe,EACtBvH,mBAASL,EAAKE,MADQ,mBAC/CsL,EAD+C,KACrCC,EADqC,OAExBpL,mBAAS4E,KAAKkB,MAAMnG,EAAK6F,QAAU,IAAM,IAFjB,mBAE/CK,EAF+C,KAEtCwF,EAFsC,OAG5BrL,mBAAS4E,KAAKkB,MAAMnG,EAAK6F,QAAU,GAAK,KAHZ,mBAG/CmC,EAH+C,KAGxC2D,EAHwC,KAIhDrL,EAAcF,IAJkC,EAKNC,oBAAS,GALH,mBAK/CuL,EAL+C,KAK7BC,EAL6B,OAMlBpL,IANkB,mBAM/CK,EAN+C,KAMrCH,EANqC,KAQtD,SAASgH,IACPrG,IACGsH,MADH,UACY5E,EADZ,WAC8B,CAC1BT,SAAU,CAAErD,KAAMF,EAAKE,KAAMC,QAASH,EAAKG,SAC3CqD,SAAS,KACJxD,EADG,CAENE,KAAMsL,EACN3F,QAAiB,GAARmC,EAAa,GAAe,GAAV9B,MAG9B2C,MAAK,SAAAC,GACCxI,GACHiL,IAEF3D,OAEDmB,OAAM,SAAAC,GACDA,EAAIC,UAAoC,MAAxBD,EAAIC,SAASC,OAC/BvI,EAAgB,yCACPqI,EAAIC,UAAoC,MAAxBD,EAAIC,SAASC,OACtCvI,EAAgB,sDAEhBA,EAAgB,qCAChBwI,QAAQC,MAAMJ,OAgCtB,IAAM8C,EAAgB,SAAA/F,GAAQ,OAC5B,4BAAQhF,UAAU,UAAU+J,QAASnD,EAAUoE,UAAWP,GACvDzF,IAIL,OACE,yBAAKhF,UAAU,OAAO6J,MAAO,CAAE,eAAgB5K,EAAK6K,QAClD,yBAAK9J,UAAU,aACb,kBAAC,EAAD,CAAW8E,QAAS7F,EAAK6F,SACtBiG,EACC,yBACEf,IAAG,UAAK7G,sBAAL,iCACH8G,IAAI,YACJC,MAAM,iBAKd,yBAAKlK,UAAU,aACb,4BACE,2BACEiL,KAAK,OACLC,YAAY,YACZZ,MAAOG,EACPU,SAAUhB,EAAWO,MAGzB,2BACEO,KAAK,SACLG,IAAK,EACLd,MAAOrD,EACPkE,SAAUhB,EAAWS,KAbzB,IAgBE,2BACEK,KAAK,SACLG,IAAK,EACLC,IAAK,GACLf,MAAOnF,EACPgG,SAAUhB,EAAWQ,KAEtB5K,GAEH,yBAAKC,UAAU,aACZ+K,EAAc,aACf,4BAAQ/K,UAAU,SAAS+J,QAASS,GAApC,UAGA,4BACExK,UAAU,SACV+J,QAAS,WACHc,EA9EZtK,IACG+K,KADH,UACWrI,EADX,iBACmC,CAC/B9D,KAAMF,EAAKE,KACXC,QAASH,EAAKG,UAEf0I,MAAK,SAAAC,GACCxI,GACHiL,IAEF3D,GAAY,SAAAnG,GAAK,OACfA,EAAMoC,QACJ,SAAA5D,GAAS,OACPD,EAAKE,OAASD,EAAUC,MAAQF,EAAKG,UAAYF,EAAUE,iBAIlE4I,OAAM,SAAAC,GACDA,EAAIC,UAAoC,MAAxBD,EAAIC,SAASC,OAC/BvI,EAAgB,mDAEhBA,EAAgB,qCAChBwI,QAAQC,MAAMJ,OA0DP6C,GAAoB,KAGzBD,EAA8B,UAAX,aC/DhBU,MA5Df,YAA4D,IAA5CtM,EAA2C,EAA3CA,KAAM4H,EAAqC,EAArCA,YAAaC,EAAwB,EAAxBA,cAAepG,EAAS,EAATA,MAAS,EACvBpB,oBAAS,GADc,mBAClDkM,EADkD,KACvCC,EADuC,OAEnBnM,oBACnC4D,QAAQvC,aAAaa,QAAQ,mBAHyB,mBAElDkK,EAFkD,KAErCC,EAFqC,KAMzDlM,qBAAU,WACHiM,GACH/K,aAAaC,QAAQ,gBAAiB,OAEvC,CAAC8K,IAEJ,IAAME,EAAclL,EAAQA,EAAMgJ,OAAS,KAQ3C,OANAjK,qBAAU,WACY,OAAhBmM,GAAwBA,EAAc,GACxCD,GAAe,KAEhB,CAACC,IAEAJ,EAEA,kBAAC,EAAD,CACEvM,KAAMA,EACNuL,cAAe,kBAAMiB,GAAa,IAClC5E,YAAaA,IAMjB,oCACG6E,EACC,yBACE1L,UAAU,oBACV6J,MAAO,CAAE,eAAgB5K,EAAK6K,QAFhC,+DAI+D,IAC7D,2BAAI7K,EAAKE,MALX,KAQA,GAEF,kBAAC,EAAD,CACEF,KAAMA,EACN2H,SAAU,WACR+E,GAAe,GACfF,GAAa,IAEf1E,YAAa,WACX4E,GAAe,IAEjB9E,YAAaA,EACbC,cAAeA,EACfpG,MAAOA,MCpDTyJ,EAAa,SAAAC,GAAM,OAAI,SAAAzB,GAAG,OAAIyB,EAAOzB,EAAI0B,OAAOC,SAEhDuB,EAAmB,CACvB,UACA,UACA,UACA,UACA,WA8JaC,MA3Jf,YAMI,IALFC,EAKC,EALDA,SACAC,EAIC,EAJDA,cACAC,EAGC,EAHDA,SACAC,EAEC,EAFDA,SACAR,EACC,EADDA,YACC,EAC+BpM,mBAAS,IADxC,mBACMmL,EADN,KACgBC,EADhB,OAEqDpL,mBACpDyM,EAAS,IAAM,IAHhB,mBAEMI,EAFN,KAE2BC,EAF3B,OAK2C9M,mBAAS,IALpD,mBAKM+M,EALN,KAKsBC,EALtB,OAM6ChN,mBAC5CuM,EAAiB3H,KAAKkB,MAAMlB,KAAKqI,SAAWV,EAAiBnC,UAP9D,mBAMM8C,EANN,KAMuBC,EANvB,KAUKC,EAAYP,EACdH,EAAcG,GACdK,EAZH,EAcmC9M,IAdnC,mBAcMK,EAdN,KAcgBH,EAdhB,KAgBDH,qBAAU,WACgB,IAApBsM,EAASrC,QACX0C,EAAuB,MAExB,CAACL,EAASrC,SAwBb,IAAMiD,EAAe,SAAA3H,GAAQ,OAC3B,4BACEhF,UAAU,UACVgL,UAAWP,KAAc0B,GAAuBE,IAE/CrH,IAIL,OACE,0BACEhF,UAAU,OACV4M,SAlCJ,SAAsBC,GACpBA,EAAM5D,iBAEN1I,IACG+K,KADH,UACWrI,EADX,WAC6B,CACzB9D,KAAMsL,EACNrL,QAAS+M,GAAuBE,EAChCvC,MAAO4C,EACP5H,QAAS,EACT6E,UAAW3I,KAAKmF,QAEjB2B,KAAKmE,GACLjE,OAAM,SAAAC,GACDA,EAAIC,UAAoC,MAAxBD,EAAIC,SAASC,OAC/BvI,EAAgB,6BAEhBA,EAAgB,qCAChBwI,QAAQC,MAAMJ,QAkBlB4B,MAAO,CAAE,eAAgB6C,IAExBhB,EACC,yBAAK1L,UAAU,qBAAf,8DAIA,GAEF,yBAAKA,UAAU,aACb,kBAAC,EAAD,CAAW8E,QAAS,GACjB6H,EACC,yBACE3C,IAAG,UAAK7G,sBAAL,gCACH8G,IAAI,cACJC,MAAM,mBAKd,yBAAKlK,UAAU,aACb,4BACE,2BACEiL,KAAK,OACL6B,GAAG,YACH5B,YAAY,YACZZ,MAAOG,EACPU,SAAUhB,EAAWO,MAGxBqB,EAASrC,OACR,oCACE,4BACEoD,GAAG,eACHxC,MAAO6B,EACPhB,SAAUhB,EAAWiC,IAEpBL,EAASxD,KAAI,SAAAnJ,GAAO,OACnB,4BACE2N,IAAK3N,EACLkL,MAAOlL,EACPyK,MAAO,CAAE,eAAgBmC,EAAc5M,KAEtCA,MAGL,4BACEkL,MAAM,GACNT,MAAO,CACL,eAAgB2C,EAChBQ,UAAW,WAJf,gBAUF,8BAGF,GAEuB,KAAxBb,GAA+BJ,EAASrC,OAiBvC,GAhBA,oCACE,2BACEuB,KAAK,OACL6B,GAAG,mBACH5B,YAAY,eACZZ,MAAO+B,EACPlB,SAAUhB,EAAWmC,KAEvB,2BACErB,KAAK,QACL6B,GAAG,oBACHxC,MAAOkC,EACPrB,SAAUhB,EAAWsC,MAM1B1M,GAEH,yBAAKC,UAAU,aACZ2M,EAAa,eACd,4BAAQ3M,UAAU,SAAS+J,QAASmC,GAApC,aChKO,SAASe,EAAT,GAA+D,IAAzClB,EAAwC,EAAxCA,SAAUC,EAA8B,EAA9BA,cAAenF,EAAe,EAAfA,YAAe,EACrCvH,oBACnC4D,QAAQvC,aAAaa,QAAQ,qBAF2C,mBACpEkK,EADoE,KACvDC,EADuD,OAI/BrM,mBAASoM,GAJsB,mBAIpEwB,EAJoE,KAIpDC,EAJoD,KAM3E1N,qBAAU,YACY,IAAhBiM,GACF/K,aAAaC,QAAQ,kBAAmB,OAEzC,CAAC8K,IAEJ,IAAM0B,EAAiBrB,EAAWA,EAASrC,OAAS,KAUpD,OARAjK,qBAAU,WACe,IAAnB2N,EACFD,GAAkB,GACU,OAAnBC,GAA2BA,EAAiB,GACrDzB,GAAe,KAEhB,CAACyB,IAEAF,GAAkBnB,EAElB,kBAAC,EAAD,CACEA,SAAUA,EACVC,cAAeA,EACfC,SAAU,WACRN,GAAe,GACfwB,GAAkB,GAClBtG,KAEFqF,SAAU,kBAAMiB,GAAkB,IAClCzB,YAAaA,IAMjB,4BACE1L,UAAU,0BACV+J,QAAS,kBAAMoD,GAAkB,KAFnC,YCxCJ,IAAMhD,EAAa,SAAAC,GAAM,OAAI,SAAAzB,GAAG,OAAIyB,EAAOzB,EAAI0B,OAAOC,SAwDvC+C,MAtDf,YAAqD,IAAhCC,EAA+B,EAA/BA,YAAaC,EAAkB,EAAlBA,eAC1BC,EAAWhI,iBAAO,MAwBxB,OArBA/F,qBAAU,WACR,SAASgO,EAAaZ,GACF,WAAdA,EAAME,MACRQ,EAAe,IACXC,GACFA,EAAS/H,QAAQiI,SAMvB,OADAjF,OAAOkF,iBAAiB,UAAWF,GAC5B,kBAAMhF,OAAOmF,oBAAoB,UAAWH,MAClD,CAACF,IAGJ9N,qBAAU,WACJ+N,GACFA,EAAS/H,QAAQiI,UAElB,CAACJ,IAGF,yBAAKtN,UAAU,cACb,yBACEgK,IAAG,UAAK7G,sBAAL,mCACH8G,IAAI,GACJF,QAAS,WACHyD,EAAS/H,SACX+H,EAAS/H,QAAQiI,WAIvB,2BACEzC,KAAK,OACLX,MAAOgD,EACPnC,SAAUhB,EAAWoD,GACrBjH,IAAKkH,IAEP,yBACExD,IAAG,UAAK7G,sBAAL,kCACH8G,IAAI,GACJJ,MAAO,CAAEgE,MAAO,OAChB9D,QAAS,WACPwD,EAAe,SCfVO,MAlCf,WAA+B,IAAD,EACYxO,mBACtC4D,QAAQvC,aAAaa,QAAQ,qCAFH,mBACrBuM,EADqB,KACPC,EADO,KAW5B,OANAvO,qBAAU,WACJsO,GACFpN,aAAaC,QAAQ,kCAAmC,OAEzD,CAACmN,SAE8BpL,IAA9BQ,iEAAYC,cAEP,qCAGL2K,EACK,qCAIP,yBAAK/N,UAAU,wBACb,oDACsB,sCADtB,QACyC,2CADzC,wJAG+D,mCAH/D,wHAOA,4BAAQ+J,QAAS,kBAAMiE,GAAgB,KAAvC,kBC0BSC,MArDf,YAAmD,IAAjCpH,EAAgC,EAAhCA,YAAajH,EAAmB,EAAnBA,gBA8C7B,OACE,4BAAQI,UAAU,eAAe+J,QA9CnC,WACE,IAAMmE,EAAQ/M,SAASgN,cAAc,SAgBrC,SAASC,EAAYvB,GACnB,IAAMwB,EAAOxB,EAAMxC,OAAOiE,OAE1B,GAAKD,GAASA,EAAK3E,OAAnB,CAEA,IAAI3G,EACJ,IACEA,EAAWlC,KAAKY,MAAM4M,GACtB,MAAOhG,GAEP,YADAzI,EAAgB,qCAIlBW,IACG+K,KADH,UACWrI,EADX,kBACoCF,GACjC+E,MAAK,SAAAwG,GACJzH,OAEDmB,OAAM,SAAAC,GACDA,EAAIC,SACNtI,EAAgB,uCAEhBA,EAAgB,oDArCxBsO,EAAMjD,KAAO,OACbiD,EAAMK,OAAS,QACfL,EAAMM,QAENN,EAAMP,iBAAiB,UAEvB,WACE,GAAIO,EAAMO,MAAM/E,OAAQ,CACtB,IAAMgF,EAAS,IAAIC,WACbN,EAAOH,EAAMO,MAAM,GACzBC,EAAOE,WAAWP,GAClBK,EAAOf,iBAAiB,OAAQS,SAiCpC,WC9BWS,MAnBf,YAAiC,IAAVnO,EAAS,EAATA,MAYrB,OACE,4BAAQV,UAAU,eAAe+J,QAZnC,WACE,IAAM+E,EAAI3N,SAASgN,cAAc,KACjCW,EAAEC,aACA,OACA,iCACEC,mBAAmBnO,KAAKC,UAAUJ,KAEtCoO,EAAEC,aAAa,WAAY,qBAC3BD,EAAEN,UAIF,WCCWS,MAZf,YAA6D,IAAxCvO,EAAuC,EAAvCA,MAAOmG,EAAgC,EAAhCA,YAAajH,EAAmB,EAAnBA,gBACvC,OACE,yBAAKI,UAAU,mBACb,kBAACkP,EAAD,CACErI,YAAaA,EACbjH,gBAAiBA,IAEnB,kBAAC,EAAD,CAAac,MAAOA,MCwCXyO,MA3Cf,WAAgB,IAAD,EACyB7P,mBAAS,IADlC,mBACNgO,EADM,KACOC,EADP,OAEuB7N,IAFvB,mBAENK,EAFM,KAEIH,EAFJ,OdcR,SAAkB0N,EAAa1N,GACpC,IAAML,EAAcF,IADiC,EAE7BC,mBAAS,MAFoB,mBAEhDoB,EAFgD,KAEzC0O,EAFyC,OAGX9P,mBAAS,GAHE,mBAG9C+P,EAH8C,KAG/BC,EAH+B,KA2BrD,GAtBA7P,qBAAU,WACRc,IACGgP,IADH,UACUtM,EADV,YAEG6E,MAAK,SAAAC,GACCxI,GACH6P,EAASrH,EAAK3F,SAGjB4F,OAAM,SAAAC,GACA1I,IACC0I,EAAIC,SACNtI,EAAgB,wCAEhBA,EACE,4DAEFwI,QAAQC,MAAMJ,UAIrB,CAAC1I,EAAa8P,EAAezP,IAElB,OAAVc,IACFA,EAAQA,EAAM8O,MAAK,SAACC,EAAOC,GAAR,OAAkBA,EAAM/F,UAAY8F,EAAM9F,aAEzD2D,EAAY5D,QAAQ,CACtB,IAAMiG,EAAcrC,EACjBsC,OACAC,cACAxM,QAAQ,OAAQ,KAChB+F,MAAM,KAELuG,EAAYjG,SACdhJ,EAAQA,EAAMoC,QAAO,SAAA7D,GAAI,OACvB0Q,EAAYG,OACV,SAAAC,GAAI,OACF9Q,EAAKE,KAAK0Q,cAAcG,SAASD,IACjC9Q,EAAKG,QAAQyQ,cAAcG,SAASD,UAgBhD,MAAO,CAACrP,EATY,SAAAuP,GACdA,GAEFb,EAASa,EAAgBvP,IAG3B4O,EAAiBD,EAAgB,KclENa,CAAS5C,EAAa1N,GAHtC,mBAGNc,EAHM,KAGCmG,EAHD,Od2ER,SAA8BnG,GACnC,GAAc,OAAVA,EACF,MAAO,GAGT,IAAMsL,EAAgBpJ,OAAOuN,OAAO,MAWpC,MAAO,CATUzP,EAAM0P,QAAO,SAACrE,EAAU9M,GACvC,OAAI8M,EAASiE,SAAS/Q,EAAKG,SAClB2M,GAETC,EAAc/M,EAAKG,SAAWH,EAAK6K,MAE7B,GAAN,mBAAWiC,GAAX,CAAqB9M,EAAKG,aACzB,IAEe4M,GcvFgBqE,CAAqB3P,GAJ1C,mBAINqL,EAJM,KAIIC,EAJJ,KAMb,OACE,yBAAKhM,UAAU,kBACb,kBAAC,EAAD,CAAWsN,YAAaA,EAAaC,eAAgBA,IACrD,kBAAC,EAAD,CACE7M,MAAOA,EACPmG,YAAaA,EACbjH,gBAAiBA,IAEnB,kBAACqN,EAAD,CACElB,SAAUA,EACVC,cAAeA,EACfnF,YAAaA,IAEf,yBAAKgD,MAAO,CAAEyG,MAAO,UACpBvQ,EACU,OAAVW,EACGA,EAAM6H,KAAI,SAAAtJ,GAAI,OACZ,kBAAC,EAAD,CACE8N,IAAG,UAAK9N,EAAKG,QAAV,YAAqBH,EAAKE,MAC7BF,KAAMA,EACN6H,cAAeyG,EACf1G,YAAaA,EACbnG,MAAOA,OAGX,GACJ,yBAAKmJ,MAAO,CAAEyG,MAAO,UACrB,yBAAKtQ,UAAU,eACb,kBAAC,EAAD,MACA,6BAFF,6BAG6B,IAC3B,uBAAGuQ,KAAK,iDAAR,eAJF,O,MCpCNC,IAASC,OAAO,kBAAC,EAAD,MAAStP,SAASuP,eAAe,W","file":"static/js/main.4190d5de.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport API_URL from \"./API_URL\";\r\n\r\nexport const isTaskEqualTo = task => otherTask =>\r\n  task.name === otherTask.name && task.project === otherTask.project;\r\n\r\nexport function formatTaskName(name) {\r\n  // The slash is needed to separate task name from project.\r\n  return name.replace(/\\//g, \"-\");\r\n}\r\n\r\nexport function useWillUnmount() {\r\n  const [willUnmount, setWillUnmount] = useState(false);\r\n\r\n  useEffect(() => {\r\n    return () => setWillUnmount(true);\r\n  }, []);\r\n\r\n  return willUnmount;\r\n}\r\n\r\nexport function useTasks(searchQuery, setErrorMessage) {\r\n  const willUnmount = useWillUnmount();\r\n  let [tasks, setTasks] = useState(null);\r\n  const [updateCounter, setUpdateCounter] = useState(0);\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(`${API_URL}/tasks/`)\r\n      .then(resp => {\r\n        if (!willUnmount) {\r\n          setTasks(resp.data);\r\n        }\r\n      })\r\n      .catch(err => {\r\n        if (!willUnmount) {\r\n          if (err.response) {\r\n            setErrorMessage(\"The server responded with an error.\");\r\n          } else {\r\n            setErrorMessage(\r\n              \"Error connecting with the server. Please reload the tab.\"\r\n            );\r\n            console.error(err);\r\n          }\r\n        }\r\n      });\r\n  }, [willUnmount, updateCounter, setErrorMessage]);\r\n\r\n  if (tasks !== null) {\r\n    tasks = tasks.sort((taskA, taskB) => taskB.timestamp - taskA.timestamp);\r\n\r\n    if (searchQuery.length) {\r\n      const searchWords = searchQuery\r\n        .trim()\r\n        .toLowerCase()\r\n        .replace(/\\s+/g, \" \")\r\n        .split(\" \");\r\n\r\n      if (searchWords.length) {\r\n        tasks = tasks.filter(task =>\r\n          searchWords.every(\r\n            word =>\r\n              task.name.toLowerCase().includes(word) ||\r\n              task.project.toLowerCase().includes(word)\r\n          )\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  const updateTasks = updaterFunction => {\r\n    if (updaterFunction) {\r\n      // Manually update, to give immediate feedback\r\n      setTasks(updaterFunction(tasks));\r\n      // (But fetch anyway to validate the API did the right thing.)\r\n    }\r\n    setUpdateCounter(updateCounter + 1);\r\n  };\r\n\r\n  return [tasks, updateTasks];\r\n}\r\n\r\nexport function getProjectsFromTasks(tasks) {\r\n  if (tasks === null) {\r\n    return [];\r\n  }\r\n\r\n  const projectColors = Object.create(null);\r\n\r\n  const projects = tasks.reduce((projects, task) => {\r\n    if (projects.includes(task.project)) {\r\n      return projects;\r\n    }\r\n    projectColors[task.project] = task.color;\r\n\r\n    return [...projects, task.project];\r\n  }, []);\r\n\r\n  return [projects, projectColors];\r\n}\r\n\r\nexport function useErrorMessage() {\r\n  const [errorMessage, setErrorMessage] = useState(\"\");\r\n  const [isHidden, setIsHidden] = useState(true);\r\n\r\n  const errorDiv = (\r\n    <div className={`error-message ${isHidden ? `hidden` : ``}`}>\r\n      {errorMessage}\r\n    </div>\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (errorMessage) {\r\n      setIsHidden(false);\r\n\r\n      let timeout = setTimeout(() => {\r\n        setIsHidden(true);\r\n        setErrorMessage(\"\");\r\n        timeout = null;\r\n      }, 3200);\r\n      return () => {\r\n        if (timeout) {\r\n          clearTimeout(timeout);\r\n        }\r\n      };\r\n    }\r\n  }, [errorMessage]);\r\n\r\n  return [errorDiv, setErrorMessage];\r\n}\r\n","import axios from \"axios\";\r\nimport MockAdapter from \"axios-mock-adapter\";\r\nimport { isTaskEqualTo } from \"./hooks\";\r\n\r\nconst mockAPI = \"https://mock.adapter.com\";\r\nconst mockAdapter = new MockAdapter(axios, { delayResponse: 180 });\r\n\r\nfunction getTasks() {\r\n  if (localStorage.getItem(\"tasks\")) {\r\n    return JSON.parse(localStorage.getItem(\"tasks\"));\r\n  } else {\r\n    // Try to recover data from cookies\r\n    return getTasksFromCookies() || [];\r\n  }\r\n}\r\n\r\nfunction saveTasks(tasks) {\r\n  localStorage.setItem(\"tasks\", JSON.stringify(tasks));\r\n  setTasksInCookies(tasks);\r\n}\r\n\r\nfunction getTasksFromCookies() {\r\n  const cookie = document.cookie;\r\n  const match = cookie.match(/tasks=([^;]+)/);\r\n  const json = match && unescape(match[1]);\r\n  return json && JSON.parse(json);\r\n}\r\n\r\nfunction setTasksInCookies(tasks) {\r\n  const expirationDate = new Date();\r\n  expirationDate.setFullYear(expirationDate.getFullYear() + 6);\r\n  document.cookie = `tasks=${escape(\r\n    JSON.stringify(tasks)\r\n  )};expires=${expirationDate.toGMTString()}`;\r\n}\r\n\r\nlet tasks = getTasks();\r\n\r\nmockAdapter.onGet(`${mockAPI}/tasks/`).reply(config => {\r\n  return [200, tasks.slice()];\r\n});\r\n\r\nmockAdapter.onPost(`${mockAPI}/tasks/`).reply(config => {\r\n  const newTask = JSON.parse(config.data);\r\n\r\n  if (tasks.some(isTaskEqualTo(newTask))) {\r\n    return [403, {}];\r\n  }\r\n\r\n  tasks.push(newTask);\r\n  saveTasks(tasks);\r\n  return [200, {}];\r\n});\r\n\r\nmockAdapter.onPatch(`${mockAPI}/tasks/`).reply(config => {\r\n  const { old_task, new_task } = JSON.parse(config.data);\r\n\r\n  const task = tasks.find(isTaskEqualTo(old_task));\r\n\r\n  if (\r\n    !isTaskEqualTo(old_task)(new_task) &&\r\n    tasks.some(isTaskEqualTo(new_task))\r\n  ) {\r\n    // Trying to change task name, but it already exists a task with the new name.\r\n    return [405, {}];\r\n  }\r\n\r\n  if (task === undefined) {\r\n    return [403, {}];\r\n  }\r\n\r\n  Object.assign(task, new_task);\r\n  saveTasks(tasks);\r\n  return [200, {}];\r\n});\r\n\r\nmockAdapter.onPost(`${mockAPI}/delete-task/`).reply(config => {\r\n  const task = JSON.parse(config.data);\r\n\r\n  if (!tasks.some(isTaskEqualTo(task))) {\r\n    return [403, {}];\r\n  }\r\n\r\n  tasks = tasks.filter(otherTask => !isTaskEqualTo(task)(otherTask));\r\n  saveTasks(tasks);\r\n  return [200, {}];\r\n});\r\n\r\nmockAdapter.onPost(`${mockAPI}/import-tasks/`).reply(config => {\r\n  const newTasks = JSON.parse(config.data);\r\n\r\n  tasks = tasks\r\n    .filter(task => !newTasks.some(isTaskEqualTo(task)))\r\n    .concat(newTasks);\r\n\r\n  saveTasks(tasks);\r\n  return [200, {}];\r\n});\r\n\r\nexport { mockAPI };\r\n","import { mockAPI } from \"./mockAdapter\";\r\n\r\nconst usesRealAPI = Boolean(process.env.REACT_APP_API);\r\nconst API_URL = usesRealAPI\r\n  ? process.env.REACT_APP_API.replace(/\\/^/, \"\")\r\n  : mockAPI;\r\n\r\n// If there's no real API, all requests will be sent to the mockAPI url.\r\n// Then the mockAdapter will take care of them.\r\n\r\nexport default API_URL;\r\n","import React, { useState, useRef, useEffect } from \"react\";\r\n\r\nfunction initCanvas(canvas) {\r\n  const rect = canvas.getBoundingClientRect();\r\n  const width = (canvas.width = rect.width);\r\n  const height = (canvas.height = rect.height);\r\n\r\n  const cx = canvas.getContext(\"2d\");\r\n  cx.fillStyle = \"white\";\r\n\r\n  return [cx, width, height];\r\n}\r\n\r\nfunction drawTime(cx, width, height, percent) {\r\n  const startAngle = -Math.PI / 2;\r\n  const endAngle = Math.PI * 2 * percent + startAngle;\r\n  const center = [width / 2, height / 2];\r\n\r\n  cx.globalAlpha = 0.4;\r\n  cx.clearRect(0, 0, width, height);\r\n  cx.beginPath();\r\n  cx.moveTo(...center);\r\n  cx.arc(...center, width / 2, startAngle, endAngle);\r\n  cx.fill();\r\n\r\n  cx.globalAlpha = 1;\r\n  cx.globalCompositeOperation = \"destination-out\";\r\n  cx.beginPath();\r\n  cx.moveTo(...center);\r\n  cx.arc(...center, width / 2 - 4, 0, Math.PI * 2);\r\n  cx.fill();\r\n  cx.globalCompositeOperation = \"source-over\";\r\n}\r\n\r\nfunction startTimer(canvas, startingSeconds) {\r\n  let timerIsRunning = true;\r\n\r\n  const [cx, width, height] = initCanvas(canvas);\r\n\r\n  requestAnimationFrame(frame);\r\n\r\n  let lastTime = performance.now();\r\n  let minutePercent = (startingSeconds % 60) / 60;\r\n\r\n  function frame(time) {\r\n    if (timerIsRunning) {\r\n      requestAnimationFrame(frame);\r\n    }\r\n\r\n    const dt = (time - lastTime) / 1000;\r\n    lastTime = time;\r\n\r\n    minutePercent += dt / 60;\r\n\r\n    drawTime(cx, width, height, minutePercent);\r\n  }\r\n\r\n  return function stopTimer() {\r\n    timerIsRunning = false;\r\n  };\r\n}\r\n\r\nfunction drawTimer(canvas, seconds) {\r\n  const [cx, width, height] = initCanvas(canvas);\r\n  const percent = (seconds % 60) / 60;\r\n\r\n  drawTime(cx, width, height, percent);\r\n}\r\n\r\nfunction TaskTimer({ seconds, isTimerRunning = false, children }) {\r\n  const [startingSeconds, setStartingSeconds] = useState(seconds);\r\n  const minutes = Math.floor(seconds / 60);\r\n  const [lastMinutes, setLastMinutes] = useState(minutes);\r\n  const canvasRef = useRef(null);\r\n\r\n  // Each minute resets the animation\r\n  useEffect(() => {\r\n    if (minutes !== lastMinutes) {\r\n      setStartingSeconds(seconds);\r\n      setLastMinutes(minutes);\r\n    }\r\n  }, [minutes, lastMinutes, seconds]);\r\n\r\n  // When timer stops, update starting seconds for next time we hit play\r\n  useEffect(() => {\r\n    if (!isTimerRunning) {\r\n      setStartingSeconds(seconds);\r\n    }\r\n  }, [isTimerRunning, seconds]);\r\n\r\n  // Draw\r\n  useEffect(() => {\r\n    if (canvasRef.current && process.env.JEST_WORKER_ID === undefined) {\r\n      if (isTimerRunning) {\r\n        return startTimer(canvasRef.current, startingSeconds);\r\n      } else {\r\n        drawTimer(canvasRef.current, startingSeconds);\r\n      }\r\n    }\r\n  }, [isTimerRunning, startingSeconds]);\r\n\r\n  return (\r\n    <div className=\"task-timer-container\">\r\n      <canvas ref={canvasRef} className=\"task-timer\"></canvas>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TaskTimer;\r\n","import React, { useState, useEffect, useCallback } from \"react\";\r\nimport axios from \"axios\";\r\nimport API_URL from \"../API_URL\";\r\nimport TaskTimer from \"./TaskTimer\";\r\nimport { isTaskEqualTo, useErrorMessage, useWillUnmount } from \"../hooks\";\r\n\r\nconst zeroPad = number => {\r\n  return String(100 + (number % 100)).substr(1);\r\n};\r\n\r\nfunction ShowTask({\r\n  task,\r\n  editTask,\r\n  updateTasks,\r\n  selectProject,\r\n  tasks,\r\n  onPlayStart\r\n}) {\r\n  const [seconds, setSeconds] = useState(task.seconds);\r\n  const minutes = Math.floor(seconds / 60) % 60;\r\n  const hours = Math.floor(seconds / 60 / 60);\r\n\r\n  const [isTimerRunning, setIsTimerRunning] = useState(false);\r\n  const [startTime, setStartTime] = useState(null);\r\n  const [secondsBeforeStart, setSecondsBeforeStart] = useState(task.seconds);\r\n\r\n  const [errorDiv, setErrorMessage] = useErrorMessage();\r\n  const willUnmount = useWillUnmount();\r\n\r\n  // Clock tick\r\n  useEffect(() => {\r\n    if (isTimerRunning) {\r\n      const interval = setInterval(() => {\r\n        setSeconds(\r\n          Math.floor(secondsBeforeStart + Date.now() / 1000 - startTime)\r\n        );\r\n      }, 1000);\r\n\r\n      return () => clearInterval(interval);\r\n    } else {\r\n      setSeconds(secondsBeforeStart);\r\n    }\r\n  }, [isTimerRunning, secondsBeforeStart, startTime]);\r\n\r\n  useEffect(() => {\r\n    if (isTimerRunning) {\r\n      setStartTime(Date.now() / 1000);\r\n    }\r\n  }, [isTimerRunning]);\r\n\r\n  useEffect(() => {\r\n    if (!isTimerRunning) {\r\n      setSecondsBeforeStart(task.seconds);\r\n    }\r\n  }, [isTimerRunning, task.seconds]);\r\n\r\n  const saveTask = useCallback(\r\n    callback => {\r\n      axios\r\n        .patch(`${API_URL}/tasks/`, {\r\n          old_task: { name: task.name, project: task.project },\r\n          new_task: { ...task, seconds }\r\n        })\r\n        .then(resp => {\r\n          if (callback) {\r\n            callback();\r\n          }\r\n        })\r\n        .catch(err => {\r\n          if (err.response && err.response.status === 405) {\r\n            setErrorMessage(\r\n              \"Somehow, we tried to change this task name to an invalid one.\"\r\n            );\r\n          } else if (err.response && err.response.status === 403) {\r\n            setErrorMessage(\r\n              \"Invalid request: this task doesn't exist anymore.\"\r\n            );\r\n          } else {\r\n            setErrorMessage(\"Error connecting with the server.\");\r\n            console.error(err);\r\n          }\r\n        });\r\n    },\r\n    [task, seconds, setErrorMessage]\r\n  );\r\n\r\n  // Stop timer and save result\r\n  function stopTimer() {\r\n    saveTask(() => {\r\n      updateTasks(tasks =>\r\n        tasks.map(someTask => {\r\n          if (\r\n            someTask.name === task.name &&\r\n            someTask.project === task.project\r\n          ) {\r\n            return { ...task, seconds };\r\n          }\r\n          return someTask;\r\n        })\r\n      );\r\n      if (!willUnmount) {\r\n        setIsTimerRunning(false);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Save task every minute\r\n  useEffect(() => {\r\n    if (isTimerRunning && seconds !== task.seconds && seconds % 60 === 0) {\r\n      saveTask();\r\n    }\r\n  }, [isTimerRunning, saveTask, seconds, task.seconds]);\r\n\r\n  function reorderTasks(other) {\r\n    const otherIndex = tasks.findIndex(isTaskEqualTo(other));\r\n    const taskIndex = tasks.findIndex(isTaskEqualTo(task));\r\n\r\n    if (otherIndex === -1 || taskIndex === -1) return;\r\n\r\n    let otherTimestamp;\r\n\r\n    if (otherIndex < taskIndex) {\r\n      otherTimestamp =\r\n        taskIndex >= tasks.length - 1\r\n          ? task.timestamp - 9000\r\n          : tasks[taskIndex + 1].timestamp;\r\n    } else {\r\n      otherTimestamp =\r\n        taskIndex > 0 ? tasks[taskIndex - 1].timestamp : Date.now();\r\n    }\r\n\r\n    const timestamp = Math.floor((task.timestamp + otherTimestamp) / 2);\r\n    const otherTask = tasks.find(isTaskEqualTo(other));\r\n\r\n    axios\r\n      .patch(`${API_URL}/tasks/`, {\r\n        old_task: other,\r\n        new_task: { ...otherTask, timestamp }\r\n      })\r\n      .then(resp => {\r\n        updateTasks();\r\n      })\r\n      .catch(err => {\r\n        if (err.response && err.response.status === 405) {\r\n          setErrorMessage(\r\n            \"Somehow, we tried to change this task name to an invalid one.\"\r\n          );\r\n        } else if (err.response && err.response.status === 403) {\r\n          setErrorMessage(\"Invalid request: This task doesn't exist anymore.\");\r\n        } else {\r\n          setErrorMessage(\"Error connecting with the server.\");\r\n          console.error(err);\r\n        }\r\n      });\r\n  }\r\n\r\n  // Ask confirmation when user closes tab\r\n  useEffect(() => {\r\n    if (isTimerRunning) {\r\n      window.onbeforeunload = evt => {\r\n        return \"There's a task running. You'll loose the timer progress.\";\r\n      };\r\n\r\n      return () => (window.onbeforeunload = undefined);\r\n    }\r\n  }, [isTimerRunning]);\r\n\r\n  return (\r\n    <div\r\n      draggable\r\n      onDragStart={evt => {\r\n        evt.dataTransfer.setData(\"text/plain\", `${task.name}/${task.project}`);\r\n      }}\r\n      onDragOver={evt => evt.preventDefault()}\r\n      onDrop={evt => {\r\n        evt.preventDefault();\r\n        const [name, project] = evt.dataTransfer.getData(\"text\").split(\"/\");\r\n        reorderTasks({ name, project }, task);\r\n      }}\r\n      className=\"task\"\r\n      style={{\r\n        \"--task-color\": task.color\r\n      }}\r\n    >\r\n      <div className=\"task-head\">\r\n        <TaskTimer seconds={seconds} isTimerRunning={isTimerRunning}>\r\n          {!isTimerRunning ? (\r\n            <button\r\n              className=\"start\"\r\n              onClick={() => {\r\n                setIsTimerRunning(true);\r\n                onPlayStart();\r\n              }}\r\n            >\r\n              <img\r\n                src={`${process.env.PUBLIC_URL}/baseline_play_arrow_white_24dp.png`}\r\n                alt=\"Start timer\"\r\n                title=\"Start timer\"\r\n              />\r\n            </button>\r\n          ) : (\r\n            <button\r\n              className=\"stop\"\r\n              onClick={() => {\r\n                stopTimer();\r\n              }}\r\n            >\r\n              <img\r\n                src={`${process.env.PUBLIC_URL}/baseline_pause_white_24dp.png`}\r\n                alt=\"Stop timer\"\r\n                title=\"Stop timer\"\r\n              />\r\n            </button>\r\n          )}\r\n        </TaskTimer>\r\n      </div>\r\n      <div className=\"task-body\">\r\n        <div className=\"float-left\">\r\n          <h3>{task.name}</h3>\r\n          {zeroPad(hours)}:{zeroPad(minutes)}\r\n          {\" - \"}\r\n          <span\r\n            className=\"clickable\"\r\n            onClick={() => selectProject(task.project)}\r\n          >\r\n            {task.project}\r\n          </span>\r\n          {errorDiv}\r\n        </div>\r\n        <div className=\"task-foot\">\r\n          <button\r\n            className=\"edit\"\r\n            onClick={() => {\r\n              if (isTimerRunning) {\r\n                stopTimer();\r\n              }\r\n              editTask();\r\n            }}\r\n          >\r\n            Edit\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ShowTask;\r\n","import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport API_URL from \"../API_URL\";\r\nimport { useWillUnmount, useErrorMessage } from \"../hooks\";\r\nimport TaskTimer from \"./TaskTimer\";\r\n\r\nconst _fromEvent = setter => evt => setter(evt.target.value);\r\n\r\nfunction EditTask({ task, cancelEdition, updateTasks }) {\r\n  const [taskName, setTaskName] = useState(task.name);\r\n  const [minutes, setMinutes] = useState(Math.floor(task.seconds / 60) % 60);\r\n  const [hours, setHours] = useState(Math.floor(task.seconds / 60 / 60));\r\n  const willUnmount = useWillUnmount();\r\n  const [hasClickedDelete, setHasClickedDelete] = useState(false);\r\n  const [errorDiv, setErrorMessage] = useErrorMessage();\r\n\r\n  function editTask() {\r\n    axios\r\n      .patch(`${API_URL}/tasks/`, {\r\n        old_task: { name: task.name, project: task.project },\r\n        new_task: {\r\n          ...task,\r\n          name: taskName,\r\n          seconds: hours * 60 * 60 + minutes * 60\r\n        }\r\n      })\r\n      .then(resp => {\r\n        if (!willUnmount) {\r\n          cancelEdition();\r\n        }\r\n        updateTasks();\r\n      })\r\n      .catch(err => {\r\n        if (err.response && err.response.status === 405) {\r\n          setErrorMessage(\"A task with that name already exists.\");\r\n        } else if (err.response && err.response.status === 403) {\r\n          setErrorMessage(\"Invalid request: this task doesn't exist anymore!\");\r\n        } else {\r\n          setErrorMessage(\"Error connecting with the server.\");\r\n          console.error(err);\r\n        }\r\n      });\r\n  }\r\n\r\n  function deleteTask() {\r\n    axios\r\n      .post(`${API_URL}/delete-task/`, {\r\n        name: task.name,\r\n        project: task.project\r\n      })\r\n      .then(resp => {\r\n        if (!willUnmount) {\r\n          cancelEdition();\r\n        }\r\n        updateTasks(tasks =>\r\n          tasks.filter(\r\n            otherTask =>\r\n              task.name !== otherTask.name || task.project !== otherTask.project\r\n          )\r\n        );\r\n      })\r\n      .catch(err => {\r\n        if (err.response && err.response.status === 403) {\r\n          setErrorMessage(\"Invalid request: the task was already deleted!\");\r\n        } else {\r\n          setErrorMessage(\"Error connecting with the server.\");\r\n          console.error(err);\r\n        }\r\n      });\r\n  }\r\n\r\n  const confirmButton = children => (\r\n    <button className=\"confirm\" onClick={editTask} disabled={!taskName}>\r\n      {children}\r\n    </button>\r\n  );\r\n\r\n  return (\r\n    <div className=\"task\" style={{ \"--task-color\": task.color }}>\r\n      <div className=\"task-head\">\r\n        <TaskTimer seconds={task.seconds}>\r\n          {confirmButton(\r\n            <img\r\n              src={`${process.env.PUBLIC_URL}/baseline_edit_white_24dp.png`}\r\n              alt=\"Edit task\"\r\n              title=\"Edit task\"\r\n            />\r\n          )}\r\n        </TaskTimer>\r\n      </div>\r\n      <div className=\"task-body\">\r\n        <h3>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Task name\"\r\n            value={taskName}\r\n            onChange={_fromEvent(setTaskName)}\r\n          />\r\n        </h3>\r\n        <input\r\n          type=\"number\"\r\n          min={0}\r\n          value={hours}\r\n          onChange={_fromEvent(setHours)}\r\n        />\r\n        :\r\n        <input\r\n          type=\"number\"\r\n          min={0}\r\n          max={60}\r\n          value={minutes}\r\n          onChange={_fromEvent(setMinutes)}\r\n        />\r\n        {errorDiv}\r\n      </div>\r\n      <div className=\"task-foot\">\r\n        {confirmButton(\"Edit task\")}\r\n        <button className=\"cancel\" onClick={cancelEdition}>\r\n          Cancel\r\n        </button>\r\n        <button\r\n          className=\"delete\"\r\n          onClick={() => {\r\n            if (hasClickedDelete) deleteTask();\r\n            else setHasClickedDelete(true);\r\n          }}\r\n        >\r\n          {!hasClickedDelete ? \"Delete\" : \"Delete?\"}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EditTask;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport ShowTask from \"./ShowTask\";\r\nimport EditTask from \"./EditTask\";\r\n\r\nfunction Task({ task, updateTasks, selectProject, tasks }) {\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [isFirstTime, setIsFirstTime] = useState(\r\n    !Boolean(localStorage.getItem(\"hasShownATask\"))\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!isFirstTime) {\r\n      localStorage.setItem(\"hasShownATask\", \"1\");\r\n    }\r\n  }, [isFirstTime]);\r\n\r\n  const tasksLength = tasks ? tasks.length : null;\r\n\r\n  useEffect(() => {\r\n    if (tasksLength !== null && tasksLength > 1) {\r\n      setIsFirstTime(false);\r\n    }\r\n  }, [tasksLength]);\r\n\r\n  if (isEditing) {\r\n    return (\r\n      <EditTask\r\n        task={task}\r\n        cancelEdition={() => setIsEditing(false)}\r\n        updateTasks={updateTasks}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {isFirstTime ? (\r\n        <div\r\n          className=\"first-time-notice\"\r\n          style={{ \"--task-color\": task.color }}\r\n        >\r\n          Now you can hit play to begin tracking the time you spend on{\" \"}\r\n          <b>{task.name}</b>.\r\n        </div>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n      <ShowTask\r\n        task={task}\r\n        editTask={() => {\r\n          setIsFirstTime(false);\r\n          setIsEditing(true);\r\n        }}\r\n        onPlayStart={() => {\r\n          setIsFirstTime(false);\r\n        }}\r\n        updateTasks={updateTasks}\r\n        selectProject={selectProject}\r\n        tasks={tasks}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Task;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport API_URL from \"../API_URL\";\r\nimport TaskTimer from \"./TaskTimer\";\r\nimport { useErrorMessage } from \"../hooks\";\r\n\r\nconst _fromEvent = setter => evt => setter(evt.target.value);\r\n\r\nconst newProjectColors = [\r\n  \"#6d7502\",\r\n  \"#1fad13\",\r\n  \"#c60d8f\",\r\n  \"#5577ff\",\r\n  \"#ff3344\"\r\n];\r\n\r\nfunction CreateTaskForm({\r\n  projects,\r\n  projectColors,\r\n  onCreate,\r\n  onCancel,\r\n  isFirstTime\r\n}) {\r\n  const [taskName, setTaskName] = useState(\"\");\r\n  const [selectedProjectName, setSelectedProjectName] = useState(\r\n    projects[0] || \"\"\r\n  );\r\n  const [newProjectName, setNewProjectName] = useState(\"\");\r\n  const [newProjectColor, setNewProjectColor] = useState(\r\n    newProjectColors[Math.floor(Math.random() * newProjectColors.length)]\r\n  );\r\n\r\n  const taskColor = selectedProjectName\r\n    ? projectColors[selectedProjectName]\r\n    : newProjectColor;\r\n\r\n  const [errorDiv, setErrorMessage] = useErrorMessage();\r\n\r\n  useEffect(() => {\r\n    if (projects.length === 0) {\r\n      setSelectedProjectName(\"\");\r\n    }\r\n  }, [projects.length]);\r\n\r\n  function handleSubmit(event) {\r\n    event.preventDefault();\r\n\r\n    axios\r\n      .post(`${API_URL}/tasks/`, {\r\n        name: taskName,\r\n        project: selectedProjectName || newProjectName,\r\n        color: taskColor,\r\n        seconds: 0,\r\n        timestamp: Date.now()\r\n      })\r\n      .then(onCreate)\r\n      .catch(err => {\r\n        if (err.response && err.response.status === 403) {\r\n          setErrorMessage(\"The task already exists!\");\r\n        } else {\r\n          setErrorMessage(\"Error connecting with the server.\");\r\n          console.error(err);\r\n        }\r\n      });\r\n  }\r\n\r\n  const createButton = children => (\r\n    <button\r\n      className=\"confirm\"\r\n      disabled={!taskName || !(selectedProjectName || newProjectName)}\r\n    >\r\n      {children}\r\n    </button>\r\n  );\r\n\r\n  return (\r\n    <form\r\n      className=\"task\"\r\n      onSubmit={handleSubmit}\r\n      style={{ \"--task-color\": taskColor }}\r\n    >\r\n      {isFirstTime ? (\r\n        <div className=\"first-time-notice\">\r\n          Start by creating a task. Just anything you're working on.\r\n        </div>\r\n      ) : (\r\n        \"\"\r\n      )}\r\n      <div className=\"task-head\">\r\n        <TaskTimer seconds={0}>\r\n          {createButton(\r\n            <img\r\n              src={`${process.env.PUBLIC_URL}/baseline_add_white_24dp.png`}\r\n              alt=\"Create task\"\r\n              title=\"Create task\"\r\n            />\r\n          )}\r\n        </TaskTimer>\r\n      </div>\r\n      <div className=\"task-body\">\r\n        <h3>\r\n          <input\r\n            type=\"text\"\r\n            id=\"task-name\"\r\n            placeholder=\"Task name\"\r\n            value={taskName}\r\n            onChange={_fromEvent(setTaskName)}\r\n          />\r\n        </h3>\r\n        {projects.length ? (\r\n          <>\r\n            <select\r\n              id=\"project-name\"\r\n              value={selectedProjectName}\r\n              onChange={_fromEvent(setSelectedProjectName)}\r\n            >\r\n              {projects.map(project => (\r\n                <option\r\n                  key={project}\r\n                  value={project}\r\n                  style={{ \"--task-color\": projectColors[project] }}\r\n                >\r\n                  {project}\r\n                </option>\r\n              ))}\r\n              <option\r\n                value=\"\"\r\n                style={{\r\n                  \"--task-color\": newProjectColor,\r\n                  fontStyle: \"italic\"\r\n                }}\r\n              >\r\n                New project\r\n              </option>\r\n            </select>\r\n            <br />\r\n          </>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        {selectedProjectName === \"\" || !projects.length ? (\r\n          <>\r\n            <input\r\n              type=\"text\"\r\n              id=\"new-project-name\"\r\n              placeholder=\"Project name\"\r\n              value={newProjectName}\r\n              onChange={_fromEvent(setNewProjectName)}\r\n            />\r\n            <input\r\n              type=\"color\"\r\n              id=\"new-project-color\"\r\n              value={newProjectColor}\r\n              onChange={_fromEvent(setNewProjectColor)}\r\n            />\r\n          </>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        {errorDiv}\r\n      </div>\r\n      <div className=\"task-foot\">\r\n        {createButton(\"Create task\")}\r\n        <button className=\"cancel\" onClick={onCancel}>\r\n          Cancel\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default CreateTaskForm;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport CreateTaskForm from \"./CreateTaskForm\";\r\n\r\nexport default function CreateTask({ projects, projectColors, updateTasks }) {\r\n  const [isFirstTime, setIsFirstTime] = useState(\r\n    !Boolean(localStorage.getItem(\"hasCreatedATask\"))\r\n  );\r\n  const [isCreatingTask, setIsCreatingTask] = useState(isFirstTime);\r\n\r\n  useEffect(() => {\r\n    if (isFirstTime === false) {\r\n      localStorage.setItem(\"hasCreatedATask\", \"1\");\r\n    }\r\n  }, [isFirstTime]);\r\n\r\n  const projectsLength = projects ? projects.length : null;\r\n\r\n  useEffect(() => {\r\n    if (projectsLength === 0) {\r\n      setIsCreatingTask(true);\r\n    } else if (projectsLength !== null && projectsLength > 0) {\r\n      setIsFirstTime(false);\r\n    }\r\n  }, [projectsLength]);\r\n\r\n  if (isCreatingTask && projects) {\r\n    return (\r\n      <CreateTaskForm\r\n        projects={projects}\r\n        projectColors={projectColors}\r\n        onCreate={() => {\r\n          setIsFirstTime(false);\r\n          setIsCreatingTask(false);\r\n          updateTasks();\r\n        }}\r\n        onCancel={() => setIsCreatingTask(false)}\r\n        isFirstTime={isFirstTime}\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <button\r\n      className=\"task task-head new-task\"\r\n      onClick={() => setIsCreatingTask(true)}\r\n    >\r\n      New task\r\n    </button>\r\n  );\r\n}\r\n","import React, { useEffect, useRef } from \"react\";\r\n\r\nconst _fromEvent = setter => evt => setter(evt.target.value);\r\n\r\nfunction SearchBar({ searchQuery, setSearchQuery }) {\r\n  const inputRef = useRef(null);\r\n\r\n  // Use Escape key to clear and focus\r\n  useEffect(() => {\r\n    function handleEscape(event) {\r\n      if (event.key === \"Escape\") {\r\n        setSearchQuery(\"\");\r\n        if (inputRef) {\r\n          inputRef.current.focus();\r\n        }\r\n      }\r\n    }\r\n\r\n    window.addEventListener(\"keydown\", handleEscape);\r\n    return () => window.removeEventListener(\"keydown\", handleEscape);\r\n  }, [setSearchQuery]);\r\n\r\n  // Focus input when searchQuery changes\r\n  useEffect(() => {\r\n    if (inputRef) {\r\n      inputRef.current.focus();\r\n    }\r\n  }, [searchQuery]);\r\n\r\n  return (\r\n    <div className=\"search-bar\">\r\n      <img\r\n        src={`${process.env.PUBLIC_URL}/baseline_search_black_18dp.png`}\r\n        alt=\"\"\r\n        onClick={() => {\r\n          if (inputRef.current) {\r\n            inputRef.current.focus();\r\n          }\r\n        }}\r\n      />\r\n      <input\r\n        type=\"text\"\r\n        value={searchQuery}\r\n        onChange={_fromEvent(setSearchQuery)}\r\n        ref={inputRef}\r\n      />\r\n      <img\r\n        src={`${process.env.PUBLIC_URL}/baseline_close_black_18dp.png`}\r\n        alt=\"\"\r\n        style={{ right: \"2px\" }}\r\n        onClick={() => {\r\n          setSearchQuery(\"\");\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SearchBar;\r\n","import React, { useState, useEffect } from \"react\";\r\n\r\nfunction LocalStorageNotice() {\r\n  const [isUnderstood, setIsUnderstood] = useState(\r\n    Boolean(localStorage.getItem(\"understood-local-storage-notice\"))\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (isUnderstood) {\r\n      localStorage.setItem(\"understood-local-storage-notice\", \"1\");\r\n    }\r\n  }, [isUnderstood]);\r\n\r\n  if (process.env.REACT_APP_API !== undefined) {\r\n    // If we use a real API, don't show this notice.\r\n    return <></>;\r\n  }\r\n\r\n  if (isUnderstood) {\r\n    return <></>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"local-storage-notice\">\r\n      <div>\r\n        This site uses both <b>cookies</b> and <b>localStorage</b> to store your\r\n        user data (it should be safe unless you decide to clear your cache). Any\r\n        data you provide is saved on your current browser and device <i>only</i>\r\n        . The server doesn't store any data whatsoever, so you're adviced to\r\n        keep regular backups using the Export function.\r\n      </div>\r\n      <button onClick={() => setIsUnderstood(true)}>I understand</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LocalStorageNotice;\r\n","import React from \"react\";\r\nimport axios from \"axios\";\r\nimport API_URL from \"../API_URL\";\r\n\r\nfunction Import({ updateTasks, setErrorMessage }) {\r\n  function importTasks() {\r\n    const input = document.createElement(\"input\");\r\n    input.type = \"file\";\r\n    input.accept = \".json\";\r\n    input.click();\r\n\r\n    input.addEventListener(\"change\", readFile);\r\n\r\n    function readFile() {\r\n      if (input.files.length) {\r\n        const reader = new FileReader();\r\n        const file = input.files[0];\r\n        reader.readAsText(file);\r\n        reader.addEventListener(\"load\", processFile);\r\n      }\r\n    }\r\n\r\n    function processFile(event) {\r\n      const file = event.target.result;\r\n\r\n      if (!file || !file.length) return;\r\n\r\n      let newTasks;\r\n      try {\r\n        newTasks = JSON.parse(file);\r\n      } catch (error) {\r\n        setErrorMessage(\"The file is invalid or corrupted.\");\r\n        return;\r\n      }\r\n\r\n      axios\r\n        .post(`${API_URL}/import-tasks/`, newTasks)\r\n        .then(result => {\r\n          updateTasks();\r\n        })\r\n        .catch(err => {\r\n          if (err.response) {\r\n            setErrorMessage(\"There was an error importing tasks.\");\r\n          } else {\r\n            setErrorMessage(\"There was an error connecting to the server.\");\r\n          }\r\n        });\r\n    }\r\n  }\r\n\r\n  return (\r\n    <button className=\"import-tasks\" onClick={importTasks}>\r\n      Import\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default Import;\r\n","import React from \"react\";\r\n\r\nfunction ExportTasks({ tasks }) {\r\n  function exportTasks() {\r\n    const a = document.createElement(\"a\");\r\n    a.setAttribute(\r\n      \"href\",\r\n      \"data:text/plain;charset=utf-u,\" +\r\n        encodeURIComponent(JSON.stringify(tasks))\r\n    );\r\n    a.setAttribute(\"download\", \"Tasks backup.json\");\r\n    a.click();\r\n  }\r\n\r\n  return (\r\n    <button className=\"export-tasks\" onClick={exportTasks}>\r\n      Export\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default ExportTasks;\r\n","import React from \"react\";\r\nimport ImportTasks from \"./ImportTasks\";\r\nimport ExportTasks from \"./ExportTasks\";\r\n\r\nfunction ButtonBar({ tasks, updateTasks, setErrorMessage }) {\r\n  return (\r\n    <div className=\"button-bar task\">\r\n      <ImportTasks\r\n        updateTasks={updateTasks}\r\n        setErrorMessage={setErrorMessage}\r\n      />\r\n      <ExportTasks tasks={tasks} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ButtonBar;\r\n","import React, { useState } from \"react\";\r\nimport Task from \"./Tasks/Task\";\r\nimport CreateTask from \"./Tasks/CreateTask\";\r\nimport { useTasks, getProjectsFromTasks, useErrorMessage } from \"./hooks\";\r\nimport SearchBar from \"./App/SearchBar\";\r\nimport LocalStorageNotice from \"./App/LocalStorageNotice\";\r\nimport ButtonBar from \"./App/ButtonBar\";\r\n\r\nfunction App() {\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [errorDiv, setErrorMessage] = useErrorMessage();\r\n  const [tasks, updateTasks] = useTasks(searchQuery, setErrorMessage);\r\n  const [projects, projectColors] = getProjectsFromTasks(tasks);\r\n\r\n  return (\r\n    <div className=\"task-container\">\r\n      <SearchBar searchQuery={searchQuery} setSearchQuery={setSearchQuery} />\r\n      <ButtonBar\r\n        tasks={tasks}\r\n        updateTasks={updateTasks}\r\n        setErrorMessage={setErrorMessage}\r\n      />\r\n      <CreateTask\r\n        projects={projects}\r\n        projectColors={projectColors}\r\n        updateTasks={updateTasks}\r\n      />\r\n      <div style={{ clear: \"both\" }}></div>\r\n      {errorDiv}\r\n      {tasks !== null\r\n        ? tasks.map(task => (\r\n            <Task\r\n              key={`${task.project}/${task.name}`}\r\n              task={task}\r\n              selectProject={setSearchQuery}\r\n              updateTasks={updateTasks}\r\n              tasks={tasks}\r\n            />\r\n          ))\r\n        : \"\"}\r\n      <div style={{ clear: \"both\" }}></div>\r\n      <div className=\"footer task\">\r\n        <LocalStorageNotice />\r\n        <br />\r\n        Mauro Cano Brusa (c) 2019.{\" \"}\r\n        <a href=\"https://github.com/mauroc8/react-time-tracker\">View source</a>.\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport \"./index.css\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}